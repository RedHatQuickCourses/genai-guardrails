<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction to Guardrails AI :: Guardrails for AI Applications</title>
    <link rel="prev" href="index.html">
    <link rel="next" href="simple.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Guardrails for AI Applications</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/genai-guardrails/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="genai-guardrails" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Guardrails for AI Applications</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../intro/index.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/guardrails.html">Why Guardrails?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/unguarded.html">Lab: LLMs with no Guardrails</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/implementation.html">Implementing Guardrails</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../ibm-guardian/index.html">IBM Granite Guardian</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/intro.html">IBM Granite Guardian</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/simple.html">Lab: Input Guardrails</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/response.html">Lab: Output Guardrails</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/hap.html">IBM HAP Models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/hap-lab.html">Lab: IBM HAP Models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ibm-guardian/custom.html">Lab: Custom Criteria Guardrails</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Guardrails AI</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="intro.html">Introduction to Guardrails AI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="simple.html">Lab: Simple Guardrails</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="stacked.html">Lab: Stacking Multiple Validators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fix.html">Lab: Redacting and Filtering Content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="server.html">Lab: Guardrails AI Server</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../trusty-ai/index.html">Trusty AI (WIP)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../feedback/index.html">Feedback</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Guardrails for AI Applications</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Guardrails for AI Applications</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Guardrails for AI Applications</a></li>
    <li><a href="index.html">Guardrails AI</a></li>
    <li><a href="intro.html">Introduction to Guardrails AI</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Introduction to Guardrails AI</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section discusses the architecture and practical application of the <strong>Guardrails AI</strong> library, a powerful tool for structuring, validating, checking inputs, and validating the outputs of Large Language Models (LLMs).</p>
</div>
<div class="paragraph">
<p>The Guardrails AI library is a Python framework that helps build reliable AI applications by performing two key functions: running Input/Output Guards in applications that detect, quantify, and mitigate the presence of specific types of risks, and helping generate structured data from LLMs. The framework has evolved from its early XML-based RAIL (Reliable AI Markup Language) approach to a modern Pydantic-integrated architecture that provides more robust validation and structured data generation capabilities.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_core_architecture_and_components"><a class="anchor" href="#_core_architecture_and_components"></a>Core Architecture and Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At its core, Guardrails AI orchestrates a multi-step process to ensure that the inputs and outputs to and from an LLM do not contain harmful content, and that it conforms to a predefined structure and meets specific quality criteria. The process is managed by a central object, called the <code>Guard</code>.</p>
</div>
<div class="paragraph">
<p>The primary components are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>The <code>Guard</code> Object</strong>: This is the main entry point and orchestrator. You instantiate a <code>Guard</code> object, which takes your input and the desired output structure, plus some validation rules, and then you use it to wrap your LLM calls. It manages the entire process from prompting the LLM to validating and correcting its response.</p>
</li>
<li>
<p><strong>Validators</strong>: These are the individual rule-checking components. A validator is a callable class or function that takes a piece of data and returns a validation outcome (<strong>pass</strong> or <strong>fail</strong>). Validators can be applied to both inputs and outputs to enforce constraints, such as checking if a string is a valid email, if a number falls within a specific range, or if a generated summary is free of hate, bias, abuse, and profanity.</p>
</li>
<li>
<p><strong>Pydantic Integration</strong>: The modern approach leverages Pydantic models for schema definition and validation, replacing the legacy XML-based RAIL files with Python-native type definitions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The interaction between these components follows a reliable, three-step loop when you use the <code>Guard</code> to call an LLM:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Prompt Engineering</strong>: The <code>Guard</code> object introspects inputs and outputs, and its associated validators. It uses this information to automatically construct a detailed, model-specific prompt. This prompt instructs the LLM not only on the task but also on how it must return the response, including data types and structural rules. This significantly increases the likelihood of getting a correctly formatted response on the first try.</p>
</li>
<li>
<p><strong>LLM API Call</strong>: The <code>Guard</code> takes this augmented prompt and sends it to the configured LLM (e.g., a model from OpenAI, Anthropic, or a self-hosted one). The LLM processes the request and generates a response.</p>
</li>
<li>
<p><strong>Validation and Correction Loop</strong>: This is the most critical step.</p>
<div class="ulist">
<ul>
<li>
<p>The <code>Guard</code> first parses the LLM&#8217;s raw output, attempting to validate it against the attached validators. If the output does not conform to the validators, this step fails.</p>
</li>
<li>
<p>If parsing is successful, the <code>Guard</code> then returns control back to your application.</p>
</li>
<li>
<p>If any validator <em>fails</em>, the <code>Guard</code> throws an exception and returns control back to the application. You can also configure it so that it doesn&#8217;t just give up; instead, it collects all the validation failures, formulates a new request to the LLM that includes the original prompt, the erroneous output, and specific instructions on how to fix the errors, and then re-calls the LLM. This "re-asking" process can be repeated a configurable number of times until the output passes all validations or the maximum number of retries is reached.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_guardrails_hub_and_validators"><a class="anchor" href="#_guardrails_hub_and_validators"></a>Guardrails Hub and Validators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You don&#8217;t always have to write your own validators from scratch. The <strong>Guardrails Hub</strong> is a centralized, community-driven registry of pre-built validators that you can easily integrate into your projects. This saves significant development time by providing ready-made solutions for common validation tasks.</p>
</div>
<div class="paragraph">
<p>Validators in the Hub cover a wide range of use cases, from simple checks like <code>IsProfane</code> or <code>ValidEmail</code> to more complex ones like <code>SqlColumnPresence</code> or <code>CompetitorCheck</code>.</p>
</div>
<div class="sect2">
<h3 id="_installing_validators_from_the_hub"><a class="anchor" href="#_installing_validators_from_the_hub"></a>Installing Validators from the Hub</h3>
<div class="paragraph">
<p>Integrating a validator from the Hub is managed through the <strong>guardrails</strong> Command Line Interface (CLI). The process is straightforward:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Find a Validator</strong>: You can browse the available validators on the <a href="https://hub.guardrailsai.com/" target="_blank" rel="noopener">Guardrails AI Hub</a> website.</p>
</li>
<li>
<p><strong>Install the Validator</strong>: Once you identify a validator you need, you use the CLI to install it directly into your project.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The CLI command structure for installing validators follows the pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ guardrails hub install hub://guardrails/validator_name</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>guardrails</code> CLI fetches the validator and makes it available in your project as a <code>pip</code> dependency, making it immediately available for import and use in your application. This local copy approach ensures that your project&#8217;s dependencies are self-contained and not reliant on a remote service at runtime.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Several stability and consistency issues in the <code>guardrails</code> CLI were observed during the implementation of the hands-on labs in this course. To ensure reproducibility of the labs on student machines, the approach taken was to use the <code>install</code> class in the <code>guardrails-cli</code> library to install validators in the Python script itself. There were also several issues with using <code>pip freeze &gt; requirements.txt</code> and trying to install the dependencies for a script from the <code>requirements.txt</code> file. The recommendation is to complete development using the <code>install</code> class embedded in code approach, and then once you decide to deploy the application, explore automation via the <code>guardrails install</code> CLI command, or requirements.txt route.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_and_using_custom_validators"><a class="anchor" href="#_creating_and_using_custom_validators"></a>Creating and Using Custom Validators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the Hub is extensive, you will inevitably encounter situations where you need a unique validation rule specific to your application&#8217;s domain. Guardrails AI is designed to be highly extensible, making it simple to create your own custom validators.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s imagine you want to ensure that a generated text response from an LLM does not contain the word "synergy". Here&#8217;s how you would create and use a custom validator for this purpose.</p>
</div>
<div class="sect2">
<h3 id="_building_the_custom_validator"><a class="anchor" href="#_building_the_custom_validator"></a>Building the Custom Validator</h3>
<div class="paragraph">
<p>A custom validator is a Python class that inherits from the base <code>Validator</code> class. The core logic resides within the <code>validate</code> method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Inherit from <code>Validator</code></strong>: You create a new class that inherits from <code>guardrails.validators.Validator</code>.</p>
</li>
<li>
<p><strong>Define the <code>validate</code> Method</strong>: This method is the heart of your validator. It receives two arguments: <code>value</code>, which is the data from the LLM output that needs to be checked, and <code>metadata</code>, a dictionary containing any additional context or parameters passed to the validator.</p>
</li>
<li>
<p><strong>Implement Validation Logic</strong>: Inside the <code>validate</code> method, you write the Python code to check the <code>value</code> against your rule.</p>
</li>
<li>
<p><strong>Return a <code>ValidationResult</code></strong>: The method must return a <code>ValidationResult</code> object. If the validation passes, you return a successful result. If it fails, you return a failure result, which includes an <code>error_message</code> explaining what went wrong and a <code>fix_value</code> that suggests a corrected version of the data. The <code>fix_value</code> is crucial for the automated correction loop.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Following this pattern, our "NoSynergy" validator would check if the input string <code>value</code> contains the substring "synergy". If it does, it would return a <code>FailResult</code> with an error message and a suggested fix, perhaps the original string with the word "synergy" removed or replaced.</p>
</div>
<div class="paragraph">
<p>See <a href="https://www.guardrailsai.com/docs/how_to_guides/custom_validators" class="bare">https://www.guardrailsai.com/docs/how_to_guides/custom_validators</a> for more implementation details.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_and_using_the_validator"><a class="anchor" href="#_registering_and_using_the_validator"></a>Registering and Using the Validator</h3>
<div class="paragraph">
<p>Once your custom validator class is defined, you need to register it so Guardrails knows it exists. This is typically done with a simple registration function call. After registration, you can use it directly within your Pydantic model. You attach your custom validator to a field by using Pydantic&#8217;s <code>Field</code> function and passing an instance of your validator to the <code>validators</code> argument.</p>
</div>
<div class="paragraph">
<p>When the <code>Guard</code> object processes the LLM output for this model, it will automatically discover and run your <code>NoSynergy</code> validator on the corresponding field. If the LLM generates a response containing "synergy", the validator will fail, and the correction loop will be triggered.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_guardrails_cli"><a class="anchor" href="#_the_guardrails_cli"></a>The Guardrails CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Guardrails Command Line Interface (CLI) is a utility that helps manage your Guardrails project. Its key functions include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>guardrails configure</code></strong>: This command initializes a Guardrails configuration file in your project. This file can store global settings, such as your API keys, making them accessible to your <code>Guard</code> objects without hardcoding them in your script.</p>
</li>
<li>
<p><strong><code>guardrails hub</code></strong>: This is the subcommand for interacting with the Guardrails Hub. As mentioned earlier, <code>guardrails hub install &lt;validator_name&gt;</code> is used to download and install validators. You can also list and manage your installed validators.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Guardrails AI Official Documentation - <a href="https://www.guardrailsai.com/docs" class="bare">https://www.guardrailsai.com/docs</a></p>
</li>
<li>
<p>Guardrails AI GitHub Repository - <a href="https://github.com/guardrails-ai/guardrails" class="bare">https://github.com/guardrails-ai/guardrails</a></p>
</li>
<li>
<p>Guardrails Hub - <a href="https://hub.guardrailsai.com/" class="bare">https://hub.guardrailsai.com/</a></p>
</li>
<li>
<p>PyPI Package Documentation - <a href="https://pypi.org/project/guardrails-ai/" class="bare">https://pypi.org/project/guardrails-ai/</a></p>
</li>
<li>
<p>Guardrails AI CLI Documentation - <a href="https://www.guardrailsai.com/docs/cli" class="bare">https://www.guardrailsai.com/docs/cli</a></p>
</li>
<li>
<p>Custom Validators Guide - <a href="https://www.guardrailsai.com/docs/how_to_guides/custom_validators" class="bare">https://www.guardrailsai.com/docs/how_to_guides/custom_validators</a></p>
</li>
<li>
<p>Validators Concepts Documentation - <a href="https://www.guardrailsai.com/docs/hub/concepts/validators" class="bare">https://www.guardrailsai.com/docs/hub/concepts/validators</a></p>
</li>
<li>
<p>Hub Validator Creation Guide - <a href="https://www.guardrailsai.com/docs/hub/how_to_guides/custom_validator" class="bare">https://www.guardrailsai.com/docs/hub/how_to_guides/custom_validator</a></p>
</li>
<li>
<p>Input Validation Documentation - <a href="https://www.guardrailsai.com/docs/hub/how_to_guides/input_validation" class="bare">https://www.guardrailsai.com/docs/hub/how_to_guides/input_validation</a></p>
</li>
<li>
<p>Guardrails AI Example Notebooks - <a href="https://github.com/guardrails-ai/guardrails/tree/main/docs/examples" class="bare">https://github.com/guardrails-ai/guardrails/tree/main/docs/examples</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Guardrails AI</a></span>
  <span class="next"><a href="simple.html">Lab: Simple Guardrails</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
